<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body class="bg-white flex items-center justify-center min-h-screen">
    <div class="w-[440px] h-[956px] bg-white relative overflow-hidden">
        <!-- Header -->
        <div class="w-full h-[120px] flex items-center justify-center">
            <h1 class="text-3xl font-bold">Settings</h1>
        </div>

        <!-- Main Content -->
        <div class="p-5 space-y-4">
            <!-- Profile Card -->
            <div class="bg-[#EDEDED] rounded-2xl p-5 flex items-center space-x-4">
                <div class="w-16 h-16 bg-[#4D4E52] rounded-full flex items-center justify-center">
                    <svg class="w-8 h-8 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
                <div>
                    <h2 id="user-name" class="text-lg font-semibold">Loading...</h2>
                    <p class="text-[#696970] text-sm">Premium Member</p>
                </div>
            </div>

            <!-- Settings Menu -->
            <div class="bg-[#EDEDED] rounded-2xl overflow-hidden">
                <!-- Menu Items -->
                <div class="divide-y divide-[#A6A6A6]">
                    <a href="notification.html"
                        class="flex items-center justify-between p-5 hover:bg-[#2A2B2F] transition-colors">
                        <span class="font-medium">Notifications</span>
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </a>
                    <a href="security.html"
                        class="flex items-center justify-between p-5 hover:bg-[#2A2B2F] transition-colors">
                        <span class="font-medium">Security</span>
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </a>
                    <a href="https://glistening-melba-1cdd2b.netlify.app/"
                        class="flex items-center justify-between p-5 hover:bg-[#2A2B2F] transition-colors">
                        <span class="font-medium">Privacy Agreement</span>
                        <img src="asset/logout.png" class="h-5 w-5" alt="">
                    </a>
                    <a href="help_and_support.html"
                        class="flex items-center justify-between p-5 hover:bg-[#2A2B2F] transition-colors">
                        <span class="font-medium">Help & Support</span>
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Logout Button -->
            <div class="pt-4">
                <button onclick="handleLogout()"
                    class="w-full bg-black text-white py-3 rounded-xl font-semibold hover:bg-gray-700 transition duration-200">
                    Log out
                </button>
            </div>


        </div>
        <!-- Bottom Navigation Bar -->
        <div id="navigation"
            class="absolute bottom-0 left-0 w-full h-[113px] bg-white z-10 rounded-t-[40px] p-6 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.4)]">
            <div class="flex justify-between items-center h-full px-4">
                <!-- Map Tab -->
                <a href="./map.html" class="nav-item flex flex-col items-center" data-type="Map">
                    <img src="./asset/grayMap.png" class="w-[30px]" />
                    <span class="text-[16px] text-[#6E6E6E] mt-2">Map</span>
                </a>
                <!-- Favorite Tab -->
                <a href="./favorite.html" class="nav-item flex flex-col items-center" data-type="Favorite">
                    <img src="./asset/grayFavorite.png" class="w-[30px]" />
                    <span class="text-[16px] text-[#6E6E6E] mt-2">Favorite</span>
                </a>
                <!-- Status Tab -->
                <a href="./status.html" class="nav-item flex flex-col items-center" data-type="Status">
                    <img src="./asset/grayStatus.png" class="w-[26px]" />
                    <span class="text-[16px] text-[#6E6E6E] mt-2">Status</span>
                </a>
                <!-- Setting Tab -->
                <a href="./setting.html" class="nav-item flex flex-col items-center" data-type="Setting">
                    <img src="./asset/graySetting.png" class="w-[30px]" />
                    <span class="text-[16px] text-[#6E6E6E] mt-2">Setting</span>
                </a>
            </div>
        </div>
    </div>

    <script src="scripts/navigation_bar.js"></script>
    <script>
        function handleLogout() {
            sessionStorage.clear();
            window.location.href = 'login.html';
        }

        async function populateUsername() {
            try {
                const res = await fetch('/api/session-user');
                if (!res.ok) throw new Error('User not logged in');
                const data = await res.json();
                console.log(data);
                console.log(data.username);
                document.getElementById('user-name').textContent = data.username;
            } catch (err) {
                console.error(err);
                document.getElementById('user-name').textContent = 'Guest';
            }
        }
        populateUsername();

    </script>

</body>

</html>