<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Favorites</title>
</head>

<body class="bg-white flex items-center justify-center min-h-screen">
  <div class="w-[440px] h-[956px] bg-white relative overflow-hidden">
    <div class="pb-[130px] overflow-y-auto h-full">
      <!-- Header -->
      <header class="text-center py-4 font-bold text-xl border-b">Favorites</header>

      <!-- Favorites List -->
      <main id="favorites-list" class="flex-grow overflow-y-auto px-4">
        <!-- Favorites will be dynamically added here -->
      </main>

      <!-- Bottom Navigation Bar -->
      <div id="navigation"
        class="absolute bottom-0 left-0 w-full h-[113px] bg-white z-10 rounded-t-[40px] p-6 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.4)]">
        <div class="flex justify-between items-center h-full px-4">
          <!-- Map Tab -->
          <a href="./map.html" class="nav-item flex flex-col items-center" data-type="Map">
            <img src="./asset/grayMap.png" class="w-[30px]" />
            <span class="text-[16px] text-[#6E6E6E] mt-2">Map</span>
          </a>
          <!-- Favorite Tab -->
          <a href="./favorite.html" class="nav-item flex flex-col items-center" data-type="Favorite">
            <img src="./asset/grayFavorite.png" class="w-[30px]" />
            <span class="text-[16px] text-[#6E6E6E] mt-2">Favorite</span>
          </a>
          <!-- Status Tab -->
          <a href="./status.html" class="nav-item flex flex-col items-center" data-type="Status">
            <img src="./asset/grayStatus.png" class="w-[26px]" />
            <span class="text-[16px] text-[#6E6E6E] mt-2">Status</span>
          </a>
          <!-- Setting Tab -->
          <a href="./setting.html" class="nav-item flex flex-col items-center" data-type="Setting">
            <img src="./asset/graySetting.png" class="w-[30px]" />
            <span class="text-[16px] text-[#6E6E6E] mt-2">Setting</span>
          </a>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Function to load and display favorites
    function loadFavorites() {
      const favoritesList = document.getElementById('favorites-list');
      const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');

      if (favorites.length === 0) {
        favoritesList.innerHTML = `
          <div class="py-8 text-center text-gray-500">
            No favorites added yet
          </div>
        `;
        return;
      }

      favoritesList.innerHTML = favorites.map((fav, index) => `
        <div class="py-4 border-b flex justify-between items-center">
          <div>
            <p class="font-semibold">${fav.street}</p>
            <p class="text-sm text-gray-600">Rate: ${fav.rate}</p>
          </div>
          <div class="flex space-x-2">
            <button onclick="location.href='paymentpage.html?zone=${encodeURIComponent(fav.street)}&rate=${encodeURIComponent(fav.rate)}'" 
                    class="px-3 py-1 bg-green-500 text-white rounded text-xs">
              Pay
            </button>
            <button onclick="removeFavorite(${index})" 
                    class="px-3 py-1 bg-red-500 text-white rounded text-xs">
              Delete
            </button>
          </div>
        </div>
      `).join('');
    }

    // Function to remove a favorite
    function removeFavorite(index) {
      let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
      favorites.splice(index, 1);
      localStorage.setItem('favorites', JSON.stringify(favorites));
      loadFavorites();
    }

    // Load favorites when page loads
    document.addEventListener('DOMContentLoaded', loadFavorites);
  </script>
  <script src="scripts/navigation_bar.js"></script>
</body>

</html>